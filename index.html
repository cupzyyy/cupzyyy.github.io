<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZYY WA BADAK</title>
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
  <!-- Font Awesome & Google Font -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    /* ============================================
       GLOBAL VARIABLES & RESET
    ============================================ */
    :root {
      /* Primary Colors */
      --primary: #25D366;
      --primary-light: #5DF58E;
      --primary-dark: #128C7E;
      --primary-gradient: linear-gradient(135deg, #25D366 0%, #00FF88 100%);
      --primary-glow: 0 0 30px rgba(37, 211, 102, 0.5);
      
      /* Accent Colors */
      --accent-purple: #8B5CF6;
      --accent-blue: #0EA5E9;
      --accent-pink: #EC4899;
      --accent-orange: #F59E0B;
      --accent-red: #EF4444;
      
      /* Background Colors */
      --bg-dark: #0A0F1A;
      --bg-darker: #060913;
      --bg-card: rgba(20, 25, 40, 0.85);
      --bg-card-hover: rgba(30, 35, 50, 0.9);
      
      /* Glass Morphism */
      --glass-bg: rgba(255, 255, 255, 0.08);
      --glass-border: rgba(255, 255, 255, 0.12);
      --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      
      /* Text Colors */
      --text-primary: #FFFFFF;
      --text-secondary: rgba(255, 255, 255, 0.85);
      --text-tertiary: rgba(255, 255, 255, 0.6);
      --text-accent: #25D366;
      
      /* Effects */
      --blur-amount: 20px;
      --transition-smooth: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-fast: all 0.2s ease;
      
      /* Shadows */
      --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.4);
      --shadow-xl: 0 25px 80px rgba(0, 0, 0, 0.5);
      --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      
      /* Border Radius */
      --radius-sm: 12px;
      --radius-md: 20px;
      --radius-lg: 28px;
      --radius-xl: 40px;
      --radius-full: 9999px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', 'Poppins', sans-serif;
      background: var(--bg-darker);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* Background Animation */
    .background-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .gradient-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.15;
      animation: float 20s infinite ease-in-out;
    }

    .orb-1 {
      width: 400px;
      height: 400px;
      background: var(--primary);
      top: 10%;
      left: 10%;
      animation-delay: 0s;
    }

    .orb-2 {
      width: 300px;
      height: 300px;
      background: var(--accent-purple);
      top: 60%;
      right: 15%;
      animation-delay: 5s;
    }

    .orb-3 {
      width: 250px;
      height: 250px;
      background: var(--accent-blue);
      bottom: 10%;
      left: 20%;
      animation-delay: 10s;
    }

    @keyframes float {
      0%, 100% {
        transform: translate(0, 0) scale(1);
      }
      33% {
        transform: translate(30px, -30px) scale(1.1);
      }
      66% {
        transform: translate(-20px, 20px) scale(0.9);
      }
    }

    /* Particle Effect */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: var(--primary);
      border-radius: 50%;
      animation: particleFloat 20s infinite linear;
    }

    @keyframes particleFloat {
      0% {
        transform: translateY(100vh) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) translateX(100px);
        opacity: 0;
      }
    }

    /* ============================================
       MAIN CONTAINERS
    ============================================ */
    .main-container {
      width: 100%;
      max-width: 480px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      position: relative;
      z-index: 1;
    }

    /* ============================================
       LOGIN PAGE STYLES
    ============================================ */
    .login-container {
      width: 100%;
      animation: slideInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .login-card {
      background: var(--bg-card);
      backdrop-filter: blur(var(--blur-amount));
      -webkit-backdrop-filter: blur(var(--blur-amount));
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-xl);
      padding: 40px 32px;
      box-shadow: var(--shadow-xl);
      position: relative;
      overflow: hidden;
      transition: var(--transition-smooth);
    }

    .login-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
      z-index: 2;
    }

    .login-card::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(37, 211, 102, 0.1) 0%, transparent 70%);
      z-index: -1;
      animation: rotate 20s linear infinite;
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .login-header {
      text-align: center;
      margin-bottom: 40px;
      position: relative;
    }

    .logo-wrapper {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 80px;
      height: 80px;
      background: var(--primary-gradient);
      border-radius: var(--radius-full);
      margin-bottom: 24px;
      position: relative;
      animation: logoPulse 2s infinite ease-in-out;
      box-shadow: var(--primary-glow);
    }

    @keyframes logoPulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: var(--primary-glow);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 0 40px rgba(37, 211, 102, 0.7);
      }
    }

    .logo-wrapper i {
      font-size: 36px;
      color: white;
    }

    .login-header h1 {
      font-size: 32px;
      font-weight: 800;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
    }

    .login-header p {
      font-size: 15px;
      color: var(--text-tertiary);
      font-weight: 500;
    }

    /* Form Styles */
    .form-group {
      margin-bottom: 24px;
      position: relative;
    }

    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .input-wrapper {
      position: relative;
    }

    .input-field {
      width: 100%;
      padding: 18px 20px;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-lg);
      color: var(--text-primary);
      font-size: 15px;
      font-weight: 500;
      transition: var(--transition-fast);
      outline: none;
    }

    .input-field:focus {
      background: rgba(255, 255, 255, 0.08);
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.2);
    }

    .input-field::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    .input-icon {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.4);
      font-size: 18px;
      pointer-events: none;
    }

    /* Button Styles */
    .btn {
      width: 100%;
      padding: 20px;
      border: none;
      border-radius: var(--radius-lg);
      font-size: 16px;
      font-weight: 700;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      transition: var(--transition-smooth);
      position: relative;
      overflow: hidden;
      letter-spacing: 0.5px;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.6s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-primary {
      background: var(--primary-gradient);
      box-shadow: 0 10px 30px rgba(37, 211, 102, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(37, 211, 102, 0.4);
    }

    .btn-primary:active {
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-2px);
    }

    .btn-danger {
      background: linear-gradient(135deg, #EF4444, #DC2626);
      box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
    }

    .btn-danger:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(239, 68, 68, 0.4);
    }

    /* Form Toggle */
    .form-toggle {
      text-align: center;
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .form-toggle p {
      color: var(--text-tertiary);
      font-size: 14px;
      margin-bottom: 8px;
    }

    .form-toggle a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 600;
      font-size: 15px;
      transition: var(--transition-fast);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .form-toggle a:hover {
      color: var(--primary-light);
      text-decoration: underline;
    }

    /* Error Message */
    .error-message {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #FCA5A5;
      padding: 16px;
      border-radius: var(--radius-md);
      margin-top: 16px;
      font-size: 14px;
      font-weight: 500;
      display: none;
      animation: shake 0.5s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    /* Loading Spinner */
    .loading-spinner {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ============================================
       APP CONTAINER STYLES
    ============================================ */
    .app-container {
      display: none;
      width: 100%;
      max-width: 480px;
      margin: 0 auto;
      padding-bottom: 90px;
      min-height: 100vh;
    }

    /* App Header */
    .app-header {
      padding: 24px 20px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(10, 15, 26, 0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .app-title {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .app-title i {
      font-size: 24px;
      color: var(--primary);
      background: rgba(37, 211, 102, 0.1);
      padding: 10px;
      border-radius: var(--radius-md);
    }

    .app-title h1 {
      font-size: 20px;
      font-weight: 700;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .user-menu {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .notification-badge {
      position: relative;
      cursor: pointer;
    }

    .notification-badge i {
      font-size: 20px;
      color: var(--text-secondary);
      transition: var(--transition-fast);
    }

    .notification-badge:hover i {
      color: var(--text-primary);
    }

    .badge-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--accent-red);
      color: white;
      font-size: 10px;
      font-weight: 700;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .user-avatar-btn {
      width: 48px;
      height: 48px;
      background: var(--primary-gradient);
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 18px;
      cursor: pointer;
      transition: var(--transition-smooth);
      overflow: hidden;
      position: relative;
    }

    .user-avatar-btn::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s;
    }

    .user-avatar-btn:hover::after {
      transform: translateX(100%);
    }

    .user-avatar-btn:hover {
      transform: scale(1.05);
      border-color: var(--primary);
    }

    /* Content Area */
    .content-area {
      padding: 20px;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Dashboard Stats */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: var(--bg-card);
      backdrop-filter: blur(var(--blur-amount));
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: 24px;
      transition: var(--transition-smooth);
      position: relative;
      overflow: hidden;
    }

    .stat-card:hover {
      background: var(--bg-card-hover);
      transform: translateY(-5px);
      border-color: rgba(255, 255, 255, 0.2);
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
      z-index: 1;
    }

    .stat-card.badak::before {
      background: var(--primary-gradient);
    }

    .stat-card.expired::before {
      background: linear-gradient(135deg, #EF4444, #DC2626);
    }

    .stat-icon {
      width: 48px;
      height: 48px;
      background: rgba(37, 211, 102, 0.1);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 16px;
    }

    .stat-card.badak .stat-icon {
      background: rgba(37, 211, 102, 0.1);
    }

    .stat-card.expired .stat-icon {
      background: rgba(239, 68, 68, 0.1);
    }

    .stat-icon i {
      font-size: 22px;
      color: var(--primary);
    }

    .stat-card.expired .stat-icon i {
      color: var(--accent-red);
    }

    .stat-value {
      font-size: 36px;
      font-weight: 800;
      margin-bottom: 4px;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .stat-card.expired .stat-value {
      background: linear-gradient(135deg, #EF4444, #DC2626);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .stat-label {
      font-size: 13px;
      color: var(--text-tertiary);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Feature Cards */
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 32px;
    }

    .feature-card {
      background: var(--bg-card);
      backdrop-filter: blur(var(--blur-amount));
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: 24px;
      text-align: center;
      transition: var(--transition-smooth);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .feature-card:hover {
      background: var(--bg-card-hover);
      transform: translateY(-5px);
      border-color: var(--primary);
    }

    .feature-card::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(45deg, transparent, rgba(37, 211, 102, 0.05), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s;
    }

    .feature-card:hover::after {
      transform: translateX(100%);
    }

    .feature-icon {
      width: 56px;
      height: 56px;
      background: var(--primary-gradient);
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
      color: white;
      font-size: 24px;
    }

    .feature-title {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--text-primary);
    }

    .feature-desc {
      font-size: 12px;
      color: var(--text-tertiary);
      line-height: 1.4;
    }

    /* Badak Activator Page */
    .activator-card {
      background: var(--bg-card);
      backdrop-filter: blur(var(--blur-amount));
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-xl);
      padding: 32px;
      margin-bottom: 24px;
      position: relative;
      overflow: hidden;
    }

    .activator-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
    }

    .phone-input-wrapper {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-lg);
      padding: 8px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: var(--transition-fast);
      margin-bottom: 24px;
    }

    .phone-input-wrapper:focus-within {
      border-color: var(--primary);
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.2);
    }

    .country-code {
      color: var(--text-primary);
      font-weight: 600;
      font-size: 16px;
    }

    .phone-input {
      flex: 1;
      background: transparent;
      border: none;
      color: var(--text-primary);
      font-size: 16px;
      font-weight: 500;
      outline: none;
      padding: 16px 0;
    }

    .phone-input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    /* Timer Display */
    .timer-display-container {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));
      border: 1px solid rgba(245, 158, 11, 0.2);
      border-radius: var(--radius-lg);
      padding: 32px 24px;
      text-align: center;
      margin-bottom: 32px;
      position: relative;
      overflow: hidden;
    }

    .timer-display-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #F59E0B, #F97316);
    }

    .timer-icon {
      font-size: 48px;
      color: #F59E0B;
      margin-bottom: 16px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        filter: drop-shadow(0 0 10px rgba(245, 158, 11, 0.5));
      }
      50% {
        transform: scale(1.1);
        filter: drop-shadow(0 0 20px rgba(245, 158, 11, 0.8));
      }
    }

    .timer-label {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.8);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 12px;
      font-weight: 600;
    }

    .timer {
      font-size: 48px;
      font-weight: 800;
      font-family: 'Courier New', monospace;
      color: #F59E0B;
      text-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
      letter-spacing: 4px;
    }

    /* Gas Badak Button */
    .gas-badak-btn {
      background: linear-gradient(135deg, #25D366, #00FF88);
      border: none;
      border-radius: var(--radius-xl);
      padding: 24px;
      font-size: 18px;
      font-weight: 800;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      transition: var(--transition-smooth);
      position: relative;
      overflow: hidden;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 15px 40px rgba(37, 211, 102, 0.3);
    }

    .gas-badak-btn:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 25px 60px rgba(37, 211, 102, 0.5);
    }

    .gas-badak-btn:active {
      transform: translateY(-2px);
    }

    .gas-badak-btn::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
      transform: rotate(45deg);
      transition: transform 0.6s;
    }

    .gas-badak-btn:hover::before {
      transform: rotate(45deg) translate(50%, 50%);
    }

    .rocket-icon {
      animation: rocketFloat 3s infinite ease-in-out;
    }

    @keyframes rocketFloat {
      0%, 100% {
        transform: translateY(0) rotate(0);
      }
      50% {
        transform: translateY(-10px) rotate(5deg);
      }
    }

    /* Profile Page */
    .profile-card {
      background: var(--bg-card);
      backdrop-filter: blur(var(--blur-amount));
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-xl);
      padding: 32px;
      margin-bottom: 24px;
      position: relative;
      overflow: hidden;
    }

    .profile-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #8B5CF6, #0EA5E9);
    }

    .profile-header {
      text-align: center;
      margin-bottom: 32px;
    }

    .profile-avatar {
      width: 120px;
      height: 120px;
      background: linear-gradient(135deg, #8B5CF6, #0EA5E9);
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      color: white;
      font-size: 48px;
      font-weight: 800;
      border: 4px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 20px 40px rgba(139, 92, 246, 0.3);
      position: relative;
      overflow: hidden;
    }

    .profile-avatar::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transform: translateX(-100%);
      animation: shine 3s infinite;
    }

    @keyframes shine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .profile-name {
      font-size: 24px;
      font-weight: 800;
      margin-bottom: 8px;
      background: linear-gradient(90deg, #8B5CF6, #0EA5E9);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .profile-role {
      font-size: 14px;
      color: var(--text-tertiary);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .profile-info-grid {
      display: grid;
      gap: 16px;
      margin-bottom: 32px;
    }

    .info-item {
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-md);
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: var(--transition-fast);
    }

    .info-item:hover {
      background: rgba(255, 255, 255, 0.08);
      transform: translateX(5px);
    }

    .info-label {
      font-size: 13px;
      color: var(--text-tertiary);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .info-value {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
      text-align: right;
      max-width: 60%;
      word-break: break-all;
    }

    .info-value.email {
      color: var(--primary);
    }

    .info-value.id {
      color: var(--accent-blue);
      font-family: 'Courier New', monospace;
      font-size: 12px;
    }

    .profile-stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 32px;
    }

    .profile-stat {
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-lg);
      padding: 20px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .profile-stat::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
    }

    .profile-stat.expired::before {
      background: linear-gradient(90deg, #EF4444, #DC2626);
    }

    .stat-number {
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 4px;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .profile-stat.expired .stat-number {
      background: linear-gradient(90deg, #EF4444, #DC2626);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .stat-title {
      font-size: 12px;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }

    /* Bottom Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(10, 15, 26, 0.95);
      backdrop-filter: blur(40px);
      -webkit-backdrop-filter: blur(40px);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      padding: 12px 20px;
      z-index: 1000;
      max-width: 480px;
      margin: 0 auto;
      box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.3);
    }

    .nav-item {
      flex: 1;
      text-align: center;
      padding: 12px 0;
      cursor: pointer;
      transition: var(--transition-fast);
      position: relative;
    }

    .nav-item.active .nav-icon {
      color: var(--primary);
      transform: translateY(-5px) scale(1.2);
    }

    .nav-item.active::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 4px;
      background: var(--primary);
      border-radius: 50%;
    }

    .nav-icon {
      font-size: 22px;
      color: var(--text-tertiary);
      margin-bottom: 6px;
      transition: var(--transition-smooth);
    }

    .nav-label {
      font-size: 11px;
      font-weight: 600;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: var(--transition-fast);
    }

    .nav-item.active .nav-label {
      color: var(--primary);
    }

    .nav-item:hover .nav-icon {
      color: var(--text-secondary);
      transform: translateY(-2px);
    }

    .nav-item:hover .nav-label {
      color: var(--text-secondary);
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      animation: fadeIn 0.3s ease;
      padding: 20px;
    }

    .modal-container {
      width: 100%;
      max-width: 400px;
      background: var(--bg-card);
      backdrop-filter: blur(var(--blur-amount));
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-xl);
      padding: 40px 32px;
      box-shadow: var(--shadow-xl);
      position: relative;
      overflow: hidden;
      animation: modalSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes modalSlideUp {
      from {
        opacity: 0;
        transform: translateY(60px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .modal-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #EF4444, #DC2626);
    }

    .modal-icon {
      font-size: 64px;
      color: #EF4444;
      text-align: center;
      margin-bottom: 24px;
      animation: modalPulse 2s infinite ease-in-out;
    }

    @keyframes modalPulse {
      0%, 100% {
        transform: scale(1);
        filter: drop-shadow(0 0 20px rgba(239, 68, 68, 0.6));
      }
      50% {
        transform: scale(1.1);
        filter: drop-shadow(0 0 30px rgba(239, 68, 68, 0.9));
      }
    }

    .modal-title {
      font-size: 24px;
      font-weight: 800;
      text-align: center;
      margin-bottom: 16px;
      color: var(--text-primary);
    }

    .modal-message {
      font-size: 15px;
      color: var(--text-secondary);
      text-align: center;
      line-height: 1.6;
      margin-bottom: 32px;
    }

    .modal-email {
      display: inline-block;
      background: rgba(37, 211, 102, 0.1);
      border: 1px solid rgba(37, 211, 102, 0.3);
      border-radius: var(--radius-md);
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 600;
      color: var(--primary);
      margin: 16px auto;
      text-align: center;
    }

    .modal-buttons {
      display: flex;
      gap: 16px;
      margin-top: 32px;
    }

    .modal-btn {
      flex: 1;
      padding: 18px;
      border-radius: var(--radius-lg);
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition-smooth);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      border: none;
    }

    .modal-btn-cancel {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-primary);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .modal-btn-cancel:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-2px);
    }

    .modal-btn-confirm {
      background: linear-gradient(135deg, #EF4444, #DC2626);
      color: white;
      box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
    }

    .modal-btn-confirm:hover {
      background: linear-gradient(135deg, #DC2626, #B91C1C);
      transform: translateY(-2px);
      box-shadow: 0 15px 40px rgba(239, 68, 68, 0.4);
    }

    /* Success Toast */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 99999;
      max-width: 400px;
    }

    .toast {
      background: var(--bg-card);
      backdrop-filter: blur(var(--blur-amount));
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: 20px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: var(--shadow-lg);
      animation: toastSlideIn 0.3s ease;
      transform-origin: top right;
    }

    @keyframes toastSlideIn {
      from {
        opacity: 0;
        transform: translateX(100px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateX(0) scale(1);
      }
    }

    .toast-icon {
      width: 40px;
      height: 40px;
      background: var(--primary-gradient);
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
    }

    .toast-content {
      flex: 1;
    }

    .toast-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .toast-message {
      font-size: 13px;
      color: var(--text-tertiary);
    }

    /* Responsive Design */
    @media (max-width: 480px) {
      .main-container,
      .app-container {
        padding: 16px;
        max-width: 100%;
      }

      .login-card {
        padding: 32px 24px;
      }

      .stats-grid,
      .feature-grid {
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .modal-container {
        padding: 32px 24px;
      }

      .modal-buttons {
        flex-direction: column;
      }

      .timer {
        font-size: 36px;
        letter-spacing: 2px;
      }
    }

    /* Scrollbar Styling */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-full);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: var(--radius-full);
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary-light);
    }

    /* Selection Styling */
    ::selection {
      background: rgba(37, 211, 102, 0.3);
      color: white;
    }

    /* Focus Outline Removal */
    *:focus {
      outline: none;
    }

    /* Disabled State */
    .disabled {
      opacity: 0.5;
      cursor: not-allowed !important;
      pointer-events: none;
    }

    /* Loading Overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(10, 15, 26, 0.9);
      backdrop-filter: blur(20px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 99999;
      flex-direction: column;
      gap: 24px;
    }

    .loading-text {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-secondary);
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    /* ============================================
       CUSTOM ANIMATIONS & EFFECTS
    ============================================ */
    .float-animation {
      animation: floating 6s ease-in-out infinite;
    }

    @keyframes floating {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-20px);
      }
    }

    .glow-effect {
      position: relative;
    }

    .glow-effect::after {
      content: '';
      position: absolute;
      inset: -2px;
      background: var(--primary-gradient);
      border-radius: inherit;
      z-index: -1;
      filter: blur(20px);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .glow-effect:hover::after {
      opacity: 0.5;
    }

    /* Text Gradient Animation */
    .gradient-text {
      background: linear-gradient(90deg, #25D366, #0EA5E9, #8B5CF6, #EC4899, #F59E0B);
      background-size: 300% 100%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientShift 8s infinite linear;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Card Hover Effects */
    .card-hover {
      transition: var(--transition-smooth);
    }

    .card-hover:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6);
    }

    /* Ripple Effect */
    .ripple {
      position: relative;
      overflow: hidden;
    }

    .ripple::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .ripple:active::after {
      width: 300px;
      height: 300px;
    }

    /* ============================================
       SPECIAL COMPONENTS
    ============================================ */
    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: var(--radius-full);
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .badge-success {
      background: rgba(37, 211, 102, 0.2);
      color: var(--primary);
      border: 1px solid rgba(37, 211, 102, 0.3);
    }

    .badge-warning {
      background: rgba(245, 158, 11, 0.2);
      color: #F59E0B;
      border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .badge-danger {
      background: rgba(239, 68, 68, 0.2);
      color: #EF4444;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .badge-premium {
      background: linear-gradient(135deg, #8B5CF6, #EC4899);
      color: white;
      position: relative;
      overflow: hidden;
    }

    .badge-premium::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: shineBadge 2s infinite;
    }

    @keyframes shineBadge {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    /* Progress Bar */
    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-full);
      overflow: hidden;
      margin: 16px 0;
    }

    .progress-fill {
      height: 100%;
      background: var(--primary-gradient);
      border-radius: var(--radius-full);
      transition: width 0.6s ease;
      position: relative;
      overflow: hidden;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: progressShine 2s infinite;
    }

    @keyframes progressShine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* Toggle Switch */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-full);
      transition: var(--transition-fast);
    }

    .toggle-slider::before {
      content: '';
      position: absolute;
      height: 22px;
      width: 22px;
      left: 4px;
      bottom: 4px;
      background: var(--primary);
      border-radius: 50%;
      transition: var(--transition-fast);
    }

    input:checked + .toggle-slider {
      background: rgba(37, 211, 102, 0.3);
    }

    input:checked + .toggle-slider::before {
      transform: translateX(30px);
    }

    /* Tooltip */
    .tooltip {
      position: relative;
    }

    .tooltip::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      padding: 8px 12px;
      background: var(--bg-card);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-md);
      font-size: 12px;
      color: var(--text-primary);
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition-fast);
      z-index: 1000;
      backdrop-filter: blur(10px);
    }

    .tooltip:hover::after {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(-8px);
    }

    /* ============================================
       FINAL TOUCHES
    ============================================ */
    .copyright {
      text-align: center;
      padding: 20px;
      color: var(--text-tertiary);
      font-size: 12px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: 32px;
    }

    .copyright a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 600;
    }

    .copyright a:hover {
      text-decoration: underline;
    }

    /* Loading Skeleton */
    .skeleton {
      background: linear-gradient(90deg, rgba(255,255,255,0.05) 25%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.05) 75%);
      background-size: 200% 100%;
      animation: skeletonLoading 1.5s infinite;
      border-radius: var(--radius-md);
    }

    @keyframes skeletonLoading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* Confetti Effect */
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background: var(--primary);
      top: -10px;
      z-index: 9999;
      opacity: 0;
    }
     
     /* ===== FIX LAYAR KEPANJANGAN ===== */
html, body {
  height: 100%;
  overflow: hidden;
}

.background-animation,
.particles {
  height: 100vh;
  overflow: hidden;
}

/* LOGIN */
.main-container {
  height: 100vh;
  min-height: unset;
  overflow: hidden;
}

/* APP */
.app-container {
  height: 100vh;
  min-height: unset;
  overflow: hidden;
}

/* SCROLL CUMA DI KONTEN */
.content-area {
  height: calc(100vh - 160px);
  overflow-y: auto;
}
     
    /* Custom Cursor */
    @media (min-width: 1024px) {
      .cursor-dot {
        position: fixed;
        top: 0;
        left: 0;
        width: 8px;
        height: 8px;
        background: var(--primary);
        border-radius: 50%;
        pointer-events: none;
        z-index: 9999;
        transform: translate(-50%, -50%);
        transition: width 0.2s, height 0.2s;
      }

      .cursor-dot.active {
        width: 40px;
        height: 40px;
        background: rgba(37, 211, 102, 0.2);
      }

      .cursor-outline {
        position: fixed;
        top: 0;
        left: 0;
        width: 40px;
        height: 40px;
        border: 2px solid var(--primary);
        border-radius: 50%;
        pointer-events: none;
        z-index: 9999;
        transform: translate(-50%, -50%);
        transition: transform 0.1s;
      }
    }
  </style>
</head>
<body>
  <!-- Background Animation -->
  <div class="background-animation">
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
    <div class="gradient-orb orb-3"></div>
  </div>

  <!-- Particles -->
  <div class="particles" id="particles"></div>

  <!-- Custom Cursor (Desktop Only) -->
  <div class="cursor-dot" id="cursorDot"></div>
  <div class="cursor-outline" id="cursorOutline"></div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading...</div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Login Page -->
  <div class="main-container">
    <div class="login-container" id="loginPage">
      <div class="login-card">
        <div class="login-header">
          <div class="logo-wrapper">
            <i class="fab fa-whatsapp"></i>
          </div>
          <h1>ZYY WA BADAK</h1>
          <p>WhatsApp Badak Automation Platform</p>
        </div>

        <div id="loginForm">
          <div class="form-group">
            <label class="form-label">Email Address</label>
            <div class="input-wrapper">
              <input type="email" id="loginEmail" class="input-field" placeholder="email@example.com">
              <div class="input-icon"><i class="fas fa-envelope"></i></div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Password</label>
            <div class="input-wrapper">
              <input type="password" id="loginPassword" class="input-field" placeholder="••••••••">
              <div class="input-icon"><i class="fas fa-lock"></i></div>
            </div>
          </div>

          <div id="loginError" class="error-message"></div>

          <button class="btn btn-primary" onclick="login()" id="loginBtn">
            <span id="loginBtnText">LOGIN</span>
          </button>

          <div class="form-toggle">
            <p>Belum punya akun?</p>
            <a onclick="showRegister()">
              <i class="fas fa-user-plus"></i>
              Daftar Akun
            </a>
          </div>

          <div class="form-toggle">
            <a onclick="showAdminLogin()">
              <i class="fas fa-shield-alt"></i>
              Login sebagai Admin
            </a>
          </div>
        </div>

        <div id="registerForm" style="display: none;">
          <div class="form-group">
            <label class="form-label">Email Address</label>
            <div class="input-wrapper">
              <input type="email" id="registerEmail" class="input-field" placeholder="email@example.com">
              <div class="input-icon"><i class="fas fa-envelope"></i></div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Password</label>
            <div class="input-wrapper">
              <input type="password" id="registerPassword" class="input-field" placeholder="Minimal 8 karakter">
              <div class="input-icon"><i class="fas fa-lock"></i></div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Konfirmasi Password</label>
            <div class="input-wrapper">
              <input type="password" id="registerConfirm" class="input-field" placeholder="Ulangi password">
              <div class="input-icon"><i class="fas fa-lock"></i></div>
            </div>
          </div>

          <div id="registerError" class="error-message"></div>

          <button class="btn btn-primary" onclick="register()" id="registerBtn">
            <span id="registerBtnText">DAFTAR SEKARANG</span>
          </button>

          <div class="form-toggle">
            <p>Sudah punya akun?</p>
            <a onclick="showLogin()">
              <i class="fas fa-sign-in-alt"></i>
              Login disini
            </a>
          </div>
        </div>

        <div id="adminLoginForm" style="display: none;">
          <div class="form-group">
            <label class="form-label">Admin Email</label>
            <div class="input-wrapper">
              <input type="email" id="adminEmail" class="input-field" placeholder="admin@wa-badak.com">
              <div class="input-icon"><i class="fas fa-user-shield"></i></div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Admin Password</label>
            <div class="input-wrapper">
              <input type="password" id="adminPassword" class="input-field" placeholder="••••••••">
              <div class="input-icon"><i class="fas fa-key"></i></div>
            </div>
          </div>

          <div id="adminError" class="error-message"></div>

          <button class="btn btn-primary" onclick="adminLogin()" id="adminBtn">
            <span id="adminBtnText">LOGIN ADMIN</span>
          </button>

          <div class="form-toggle">
            <a onclick="showLogin()">
              <i class="fas fa-arrow-left"></i>
              Kembali ke User Login
            </a>
          </div>
        </div>
      </div>

      <div class="copyright">
        &copy; 2026 Zyy WA Badak. All rights reserved.
        <br>
        <a href="#" onclick="showToast('Fitur Vip Coming Soon!', 'success')">Unlock Vip Features</a>
      </div>
    </div>
  </div>

  <!-- Main App -->
  <div class="app-container" id="appContainer">
    <!-- App Header -->
    <div class="app-header">
      <div class="app-title">
        <i class="fab fa-whatsapp"></i>
        <h1>Dashboard</h1>
      </div>
      
      <div class="user-menu">
        <div class="notification-badge" onclick="showToast('No new notifications', 'info')">
          <i class="fas fa-bell"></i>
          <div class="badge-count">3</div>
        </div>
        
        <div class="user-avatar-btn" onclick="showAppPage('profilePage')" id="userAvatarBtn">
          U
        </div>
      </div>
    </div>

    <!-- Content Area -->
    <div class="content-area">
      <!-- Home Page -->
      <div id="homePage">
        <!-- Stats -->
        <div class="stats-grid">
          <div class="stat-card badak card-hover">
            <div class="stat-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <div class="stat-value" id="totalBadak">0</div>
            <div class="stat-label">Badak Aktif</div>
          </div>

          <div class="stat-card expired card-hover">
            <div class="stat-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-value" id="totalNonBadak">0</div>
            <div class="stat-label">Nonbadak</div>
          </div>
        </div>

        <!-- Features -->
        <div class="feature-grid">
          <div class="feature-card card-hover" onclick="showAppPage('badakPage')">
            <div class="feature-icon">
              <i class="fas fa-rocket"></i>
            </div>
            <div class="feature-title">Gas Badak</div>
            <div class="feature-desc">Aktifkan fitur badak untuk nomor WhatsApp</div>
          </div>

          <div class="feature-card card-hover" onclick="showToast('Coming Soon!', 'info')">
            <div class="feature-icon">
              <i class="fas fa-chart-line"></i>
            </div>
            <div class="feature-title">Analytics</div>
            <div class="feature-desc">Monitor performa & statistik lengkap</div>
          </div>

          <div class="feature-card card-hover" onclick="showToast('Coming Soon!', 'info')">
            <div class="feature-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="feature-title">Multi User</div>
            <div class="feature-desc">Kelola tim & delegasi tugas</div>
          </div>

          <div class="feature-card card-hover" onclick="showToast('Coming Soon!', 'info')">
            <div class="feature-icon">
              <i class="fas fa-cog"></i>
            </div>
            <div class="feature-title">Settings</div>
            <div class="feature-desc">Customize pengalaman Anda</div>
          </div>
        </div>

        <!-- Guide Card -->
        <div class="activator-card card-hover">
          <h3 style="color: var(--text-primary); margin-bottom: 20px; font-size: 18px;">
            <i class="fas fa-graduation-cap" style="color: var(--accent-blue); margin-right: 10px;"></i>
            Panduan
          </h3>
          
          <div style="background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md); padding: 20px;">
            <div style="display: flex; align-items: center; margin-bottom: 16px;">
              <div style="width: 32px; height: 32px; background: rgba(37, 211, 102, 0.2); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                <span style="color: var(--primary); font-weight: 700;">1</span>
              </div>
              <span style="color: var(--text-secondary);">Masukkan nomor WhatsApp di halaman Badak</span>
            </div>
            
            <div style="display: flex; align-items: center; margin-bottom: 16px;">
              <div style="width: 32px; height: 32px; background: rgba(37, 211, 102, 0.2); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                <span style="color: var(--primary); font-weight: 700;">2</span>
              </div>
              <span style="color: var(--text-secondary);">Klik GAS BADAK untuk aktivasi fitur</span>
            </div>
            
            <div style="display: flex; align-items: center; margin-bottom: 16px;">
              <div style="width: 32px; height: 32px; background: rgba(37, 211, 102, 0.2); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                <span style="color: var(--primary); font-weight: 700;">3</span>
              </div>
              <span style="color: var(--text-secondary);">Fitur aktif selama 24 jam dengan performa maksimal</span>
            </div>
            
            <div style="display: flex; align-items: center;">
              <div style="width: 32px; height: 32px; background: rgba(37, 211, 102, 0.2); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                <span style="color: var(--primary); font-weight: 700;">4</span>
              </div>
              <span style="color: var(--text-secondary);">Renew sebelum expired untuk akses tanpa batas</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Badak Page -->
      <div id="badakPage" style="display: none;">
        <div class="activator-card card-hover">
          <h3 style="color: var(--text-primary); margin-bottom: 24px; font-size: 20px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-rocket" style="color: var(--primary);"></i>
            Badak Activator
          </h3>
          
          <div class="form-group">
            <label class="form-label">Nomor WhatsApp</label>
            <div class="phone-input-wrapper">
              <span class="country-code">+62</span>
              <input type="number" id="phone" class="phone-input" placeholder="812xxxxxxx">
            </div>
          </div>

          <div class="timer-display-container">
            <div class="timer-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="timer-label">Masa Aktif Wa Badak:</div>
            <div class="timer" id="expiredTimer">24:00:00</div>
          </div>

          <button class="gas-badak-btn ripple" onclick="gasBadak()" id="gasBadakBtn">
            <i class="fas fa-rocket rocket-icon"></i>
            <span id="btnText">GAS BADAK</span>
          </button>
        </div>

        <div class="profile-card card-hover">
          <h3 style="color: var(--text-primary); margin-bottom: 20px; font-size: 18px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-crown" style="color: #F59E0B;"></i>
            Fitur
          </h3>
          
          <div style="display: grid; gap: 12px;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <div style="width: 24px; height: 24px; background: rgba(37, 211, 102, 0.2); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-check" style="color: var(--primary); font-size: 12px;"></i>
              </div>
              <span style="color: var(--text-secondary);">High-speed message delivery</span>
            </div>
            
            <div style="display: flex; align-items: center; gap: 12px;">
              <div style="width: 24px; height: 24px; background: rgba(37, 211, 102, 0.2); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-check" style="color: var(--primary); font-size: 12px;"></i>
              </div>
              <span style="color: var(--text-secondary);">Unlimited contact storage</span>
            </div>
            
            <div style="display: flex; align-items: center; gap: 12px;">
              <div style="width: 24px; height: 24px; background: rgba(37, 211, 102, 0.2); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-check" style="color: var(--primary); font-size: 12px;"></i>
              </div>
              <span style="color: var(--text-secondary);">Priority customer support</span>
            </div>
            
            <div style="display: flex; align-items: center; gap: 12px;">
              <div style="width: 24px; height: 24px; background: rgba(37, 211, 102, 0.2); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-check" style="color: var(--primary); font-size: 12px;"></i>
              </div>
              <span style="color: var(--text-secondary);">Advanced analytics dashboard</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Profile Page -->
      <div id="profilePage" style="display: none;">
        <div class="profile-card card-hover">
          <div class="profile-header">
            <div class="profile-avatar" id="profileAvatar">U</div>
            <div class="profile-name" id="profileUsername">User</div>
            <div class="profile-role" id="profileRole">Member</div>
          </div>

          <div class="profile-info-grid">
            <div class="info-item">
              <span class="info-label">Email</span>
              <span class="info-value email" id="profileEmail">user@email.com</span>
            </div>
            
            <div class="info-item">
              <span class="info-label">User ID</span>
              <span class="info-value id" id="profileUserId">USER-XXXXXX</span>
            </div>
            
            <div class="info-item">
              <span class="info-label">Status</span>
              <span class="badge badge-success">Active</span>
            </div>
            
            <div class="info-item">
              <span class="info-label">Bergabung</span>
              <span class="info-value" id="profileJoined">1 Jan 2024</span>
            </div>
          </div>

          <div class="profile-stats-grid">
            <div class="profile-stat">
              <div class="stat-number" id="profileBadak">0</div>
              <div class="stat-title">Badak Aktif</div>
            </div>

            <div class="profile-stat expired">
              <div class="stat-number" id="profileExpired">0</div>
              <div class="stat-title">Nonbadak</div>
            </div>
          </div>

          <button class="btn btn-danger" onclick="showLogoutModal()">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
          </button>
        </div>

        <div class="activator-card card-hover">
          <h3 style="color: var(--text-primary); margin-bottom: 20px; font-size: 18px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-gem" style="color: var(--accent-purple);"></i>
            Upgrade Plan
          </h3>
          
          <div style="color: var(--text-secondary); font-size: 14px; line-height: 1.6; margin-bottom: 24px;">
            Upgrade ke plan vip untuk akses fitur tak terbatas dan performa maksimal.
          </div>
          
          <button class="btn btn-primary" onclick="showToast('Upgrade Feature Coming Soon!', 'info')">
            <i class="fas fa-crown"></i>
            Upgrade ke Vip
          </button>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <div class="nav-item active" onclick="showAppPage('homePage')">
        <div class="nav-icon"><i class="fas fa-home"></i></div>
        <div class="nav-label">Home</div>
      </div>
      <div class="nav-item" onclick="showAppPage('badakPage')">
        <div class="nav-icon"><i class="fab fa-whatsapp"></i></div>
        <div class="nav-label">Badak</div>
      </div>
      <div class="nav-item" onclick="showAppPage('profilePage')">
        <div class="nav-icon"><i class="fas fa-user"></i></div>
        <div class="nav-label">Profile</div>
      </div>
    </div>
  </div>

  <!-- Logout Modal -->
  <div id="logoutModal" class="modal-overlay">
    <div class="modal-container">
      <div class="modal-icon">
        <i class="fas fa-sign-out-alt"></i>
      </div>
      
      <h2 class="modal-title">Logout dari WA Badak?</h2>
      
      <p class="modal-message">
        Anda akan keluar dari akun:
      </p>
      
      <div class="modal-email" id="modalUserEmail">
        user@email.com
      </div>
      
      <p class="modal-message">
        Semua data akan tetap tersimpan untuk login berikutnya.
      </p>
      
      <div class="modal-buttons">
        <button class="modal-btn modal-btn-cancel" onclick="closeLogoutModal()">
          <i class="fas fa-times"></i>
          BATAL
        </button>
        
        <button class="modal-btn modal-btn-confirm" onclick="confirmLogout()">
          <i class="fas fa-check"></i>
          LOGOUT
        </button>
      </div>
    </div>
  </div>

  <script>
    // ============================================
    // SUPER PREMIUM REDESIGN - ENHANCED SCRIPT
    // ============================================

    // Generate particles
    function generateParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 50;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        // Random position
        particle.style.left = `${Math.random() * 100}vw`;
        particle.style.top = `${Math.random() * 100}vh`;
        
        // Random size
        const size = Math.random() * 3 + 1;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        // Random color
        const colors = ['#25D366', '#0EA5E9', '#8B5CF6', '#EC4899'];
        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
        
        // Random animation
        const duration = Math.random() * 20 + 10;
        const delay = Math.random() * 5;
        particle.style.animationDuration = `${duration}s`;
        particle.style.animationDelay = `${delay}s`;
        
        particlesContainer.appendChild(particle);
      }
    }

    // Custom cursor (desktop only)
    function initCustomCursor() {
      if (window.innerWidth < 1024) return;
      
      const cursorDot = document.getElementById('cursorDot');
      const cursorOutline = document.getElementById('cursorOutline');
      
      document.addEventListener('mousemove', (e) => {
        cursorDot.style.left = `${e.clientX}px`;
        cursorDot.style.top = `${e.clientY}px`;
        
        setTimeout(() => {
          cursorOutline.style.left = `${e.clientX}px`;
          cursorOutline.style.top = `${e.clientY}px`;
        }, 50);
      });
      
      // Add active state on click
      document.addEventListener('mousedown', () => {
        cursorDot.classList.add('active');
      });
      
      document.addEventListener('mouseup', () => {
        cursorDot.classList.remove('active');
      });
      
      // Add hover effect for interactive elements
      const interactiveElements = document.querySelectorAll('button, .nav-item, .feature-card, .stat-card, .info-item');
      interactiveElements.forEach(el => {
        el.addEventListener('mouseenter', () => {
          cursorDot.style.width = '0px';
          cursorDot.style.height = '0px';
        });
        
        el.addEventListener('mouseleave', () => {
          cursorDot.style.width = '8px';
          cursorDot.style.height = '8px';
        });
      });
    }

    // Toast notification system
    function showToast(message, type = 'success') {
      const toastContainer = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = 'toast';
      
      const icon = type === 'success' ? 'fa-check' : 
                  type === 'error' ? 'fa-times' : 
                  type === 'warning' ? 'fa-exclamation' : 'fa-info';
      
      const iconColor = type === 'success' ? 'var(--primary)' :
                       type === 'error' ? 'var(--accent-red)' :
                       type === 'warning' ? 'var(--accent-orange)' : 'var(--accent-blue)';
      
      toast.innerHTML = `
        <div class="toast-icon" style="background: ${iconColor}">
          <i class="fas ${icon}"></i>
        </div>
        <div class="toast-content">
          <div class="toast-title">${type.charAt(0).toUpperCase() + type.slice(1)}</div>
          <div class="toast-message">${message}</div>
        </div>
      `;
      
      toastContainer.appendChild(toast);
      
      // Remove toast after 4 seconds
      setTimeout(() => {
        toast.style.animation = 'toastSlideIn 0.3s ease reverse';
        setTimeout(() => {
          toast.remove();
        }, 300);
      }, 4000);
    }

    // Confetti effect
    function createConfetti() {
      const colors = ['#25D366', '#0EA5E9', '#8B5CF6', '#EC4899', '#F59E0B'];
      const confettiCount = 100;
      
      for (let i = 0; i < confettiCount; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        
        // Random position at top
        confetti.style.left = `${Math.random() * 100}vw`;
        
        // Random color
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        
        // Random size
        const size = Math.random() * 10 + 5;
        confetti.style.width = `${size}px`;
        confetti.style.height = `${size}px`;
        
        // Random shape
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        
        document.body.appendChild(confetti);
        
        // Animation
        const animation = confetti.animate([
          {
            opacity: 1,
            transform: `translateY(0) rotate(0deg)`
          },
          {
            opacity: 1,
            transform: `translateY(${window.innerHeight + 100}px) rotate(${Math.random() * 360}deg)`
          }
        ], {
          duration: Math.random() * 3000 + 2000,
          easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
        });
        
        // Remove after animation
        animation.onfinish = () => {
          confetti.remove();
        };
      }
    }

    // Loading overlay control
    function showLoading(show = true) {
      const loadingOverlay = document.getElementById('loadingOverlay');
      loadingOverlay.style.display = show ? 'flex' : 'none';
      
      if (show) {
        // Animate loading text
        const loadingText = loadingOverlay.querySelector('.loading-text');
        let dots = 0;
        const interval = setInterval(() => {
          dots = (dots + 1) % 4;
          loadingText.textContent = 'Loading' + '.'.repeat(dots);
        }, 500);
        
        return () => {
          clearInterval(interval);
          loadingOverlay.style.display = 'none';
        };
      }
    }

    // Enhanced showToast with confetti for success
    function showSuccessWithConfetti(message) {
      showToast(message, 'success');
      createConfetti();
    }

    // Initialize all effects
    window.addEventListener('DOMContentLoaded', () => {
      generateParticles();
      initCustomCursor();
      
      // Add initial animation to logo
      const logoWrapper = document.querySelector('.logo-wrapper');
      if (logoWrapper) {
        setTimeout(() => {
          logoWrapper.style.animation = 'logoPulse 2s infinite ease-in-out';
        }, 1000);
      }
      
      // Add hover effects to all cards
      const cards = document.querySelectorAll('.card-hover');
      cards.forEach(card => {
        card.addEventListener('mouseenter', () => {
          card.style.transform = 'translateY(-10px) scale(1.02)';
          card.style.boxShadow = '0 30px 80px rgba(0, 0, 0, 0.6)';
        });
        
        card.addEventListener('mouseleave', () => {
          card.style.transform = 'translateY(0) scale(1)';
          card.style.boxShadow = '';
        });
      });
      
      // Add ripple effect to buttons
      const buttons = document.querySelectorAll('.ripple');
      buttons.forEach(button => {
        button.addEventListener('click', function(e) {
          const rect = this.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          
          const ripple = document.createElement('span');
          ripple.style.position = 'absolute';
          ripple.style.borderRadius = '50%';
          ripple.style.background = 'rgba(255, 255, 255, 0.3)';
          ripple.style.transform = 'scale(0)';
          ripple.style.animation = 'ripple 0.6s linear';
          ripple.style.left = `${x}px`;
          ripple.style.top = `${y}px`;
          ripple.style.width = '100px';
          ripple.style.height = '100px';
          
          this.appendChild(ripple);
          
          setTimeout(() => {
            ripple.remove();
          }, 600);
        });
      });
    });

    // ============================================
    // MAIN APPLICATION LOGIC
    // ============================================
    
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCf230zCliSZ9EYLByMnmflqw8sOz328Uc",
      authDomain: "database-cupz.firebaseapp.com",
      projectId: "database-cupz",
      storageBucket: "database-cupz.firebasestorage.app",
      messagingSenderId: "343357519412",
      appId: "1:343357519412:web:dce862636c7c459e6a3c61"
    };

    // Initialize Firebase
    try {
      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
    } catch (error) {
      console.error("Firebase initialization error:", error);
    }

    const auth = firebase.auth();
    const db = firebase.firestore();

    // State
    let currentUser = null;
    let userData = {};
    let isAdmin = false;
    let badakNumbers = [];

    // Login Functions
    function showRegister() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('adminLoginForm').style.display = 'none';
      document.getElementById('registerForm').style.display = 'block';
      resetButtons();
    }

    function showLogin() {
      document.getElementById('registerForm').style.display = 'none';
      document.getElementById('adminLoginForm').style.display = 'none';
      document.getElementById('loginForm').style.display = 'block';
      resetButtons();
    }

    function showAdminLogin() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('registerForm').style.display = 'none';
      document.getElementById('adminLoginForm').style.display = 'block';
      resetButtons();
    }

    function showError(elementId, message) {
      const element = document.getElementById(elementId);
      element.textContent = message;
      element.style.display = 'block';
      setTimeout(() => {
        element.style.display = 'none';
      }, 5000);
    }

    function resetButtons() {
      const buttons = ['loginBtnText', 'registerBtnText', 'adminBtnText', 'btnText'];
      buttons.forEach(id => {
        const element = document.getElementById(id);
        if (element) element.textContent = id.replace('BtnText', '').toUpperCase();
      });
      
      ['loginBtn', 'registerBtn', 'adminBtn', 'gasBadakBtn'].forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          element.disabled = false;
          element.innerHTML = element.innerHTML.replace('<div class="loading-spinner"></div>', '');
        }
      });
    }

    async function login() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;

      if (!email || !password) {
        showError('loginError', 'Email dan password harus diisi');
        return;
      }

      const btn = document.getElementById('loginBtn');
      const btnText = document.getElementById('loginBtnText');
      btn.disabled = true;
      btnText.innerHTML = '<div class="loading-spinner"></div>';

      try {
        const userCredential = await auth.signInWithEmailAndPassword(email, password);
        currentUser = userCredential.user;
        
        // Show success toast
        showSuccessWithConfetti('Login berhasil!');
        
        // Get user data
        try {
          const userDoc = await db.collection('users').doc(currentUser.uid).get();
          if (userDoc.exists) {
            userData = userDoc.data();
            isAdmin = userData.role === 'admin';
            
            if (isAdmin) {
              window.location.href = 'admin.html';
              return;
            }
          } else {
            // Create new user
            await db.collection('users').doc(currentUser.uid).set({
              email: email,
              role: 'user',
              createdAt: firebase.firestore.FieldValue.serverTimestamp(),
              totalBadak: 0,
              totalExpired: 0,
              plan: 'vip'
            });
            userData = { email, role: 'user', plan: 'vip' };
            isAdmin = false;
          }
          showApp();
        } catch (firestoreError) {
          console.warn("Firestore error:", firestoreError);
          showApp();
        }
        
      } catch (error) {
        showError('loginError', error.message);
        btn.disabled = false;
        btnText.textContent = 'LOGIN';
      }
    }

    async function register() {
      const email = document.getElementById('registerEmail').value;
      const password = document.getElementById('registerPassword').value;
      const confirm = document.getElementById('registerConfirm').value;
      
      if (!email || !password || !confirm) {
        showError('registerError', 'Semua field harus diisi');
        return;
      }
      
      if (password.length < 6) {
        showError('registerError', 'Password minimal 6 karakter');
        return;
      }
      
      if (password !== confirm) {
        showError('registerError', 'Password tidak cocok');
        return;
      }

      const btn = document.getElementById('registerBtn');
      const btnText = document.getElementById('registerBtnText');
      btn.disabled = true;
      btnText.innerHTML = '<div class="loading-spinner"></div>';
      
      try {
        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        currentUser = userCredential.user;
        
        // Create user in Firestore
        try {
          await db.collection('users').doc(currentUser.uid).set({
            email: email,
            role: 'user',
            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
            totalBadak: 0,
            totalExpired: 0,
            plan: 'vip'
          });
        } catch (firestoreError) {
          console.warn("Firestore error during registration:", firestoreError);
        }
        
        userData = { email, role: 'user', plan: 'vip' };
        isAdmin = false;
        
        // Show success
        showSuccessWithConfetti('Akun berhasil dibuat!');
        showApp();
        
      } catch (error) {
        showError('registerError', error.message);
        btn.disabled = false;
        btnText.textContent = 'DAFTAR SEKARANG';
      }
    }

    async function adminLogin() {
      const email = document.getElementById('adminEmail').value;
      const password = document.getElementById('adminPassword').value;
      
      if (!email || !password) {
        showError('adminError', 'Email dan password harus diisi');
        return;
      }

      const btn = document.getElementById('adminBtn');
      const btnText = document.getElementById('adminBtnText');
      btn.disabled = true;
      btnText.innerHTML = '<div class="loading-spinner"></div>';
      
      try {
        const userCredential = await auth.signInWithEmailAndPassword(email, password);
        currentUser = userCredential.user;
        
        // Check admin role
        const userDoc = await db.collection('users').doc(currentUser.uid).get();
        if (userDoc.exists) {
          userData = userDoc.data();
          if (userData.role !== 'admin') {
            await auth.signOut();
            throw new Error('Hanya admin yang bisa login di sini');
          }
          isAdmin = true;
        } else {
          throw new Error('User tidak ditemukan');
        }
        
        showSuccessWithConfetti('Login admin berhasil!');
        window.location.href = 'admin.html';
        
      } catch (error) {
        showError('adminError', error.message);
        btn.disabled = false;
        btnText.textContent = 'LOGIN ADMIN';
      }
    }

    function showApp() {
      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('appContainer').style.display = 'block';
      
      resetButtons();
      
      // Update user info
      if (currentUser) {
        document.getElementById('userAvatarBtn').textContent = currentUser.email.charAt(0).toUpperCase();
      }
      
      // Load data
      loadUserData();
    }

    async function loadUserData() {
      if (!currentUser) return;
      
      try {
        let activeBadak = 0;
        let expiredBadak = 0;
        
        // Try Firestore first
        try {
          const userDoc = await db.collection('users').doc(currentUser.uid).get();
          if (userDoc.exists) {
            userData = userDoc.data();
          }
          
          // Load badak numbers
          const badakSnapshot = await db.collection('badak_numbers')
            .where('userId', '==', currentUser.uid)
            .get();
          
          badakNumbers = [];
          badakSnapshot.forEach(doc => {
            const data = doc.data();
            badakNumbers.push({ id: doc.id, ...data });
            
            if (data.expiredAt) {
              const expiredTime = data.expiredAt.toDate();
              if (expiredTime > new Date()) {
                activeBadak++;
              } else {
                expiredBadak++;
              }
            }
          });
        } catch (error) {
          console.warn("Firestore error, using fallback:", error);
          // Use localStorage fallback
          const storedBadaks = JSON.parse(localStorage.getItem('badak_numbers') || '[]');
          activeBadak = storedBadaks.filter(b => new Date(b.expiredAt) > new Date()).length;
          expiredBadak = storedBadaks.filter(b => new Date(b.expiredAt) <= new Date()).length;
        }
        
        // Update all stats displays
        updateStatsDisplays(activeBadak, expiredBadak);
        
        // Update profile page
        updateProfilePage();
        
      } catch (error) {
        console.error("Error loading user data:", error);
        showToast('Gagal memuat data', 'error');
      }
    }

    function updateStatsDisplays(active, expired) {
      // Update all display elements
      const displays = [
        'totalBadak', 'totalNonBadak',
        'profileBadak', 'profileExpired'
      ];
      
      displays.forEach((id, index) => {
        const element = document.getElementById(id);
        if (element) {
          element.textContent = index % 2 === 0 ? active : expired;
        }
      });
    }

    function updateProfilePage() {
      if (!currentUser) return;
      
      const email = currentUser.email;
      const username = email.split('@')[0];
      const formattedUsername = username.charAt(0).toUpperCase() + username.slice(1);
      
      // Update profile elements
      document.getElementById('profileAvatar').textContent = email.charAt(0).toUpperCase();
      document.getElementById('profileUsername').textContent = formattedUsername;
      document.getElementById('profileEmail').textContent = email;
      document.getElementById('profileUserId').textContent = currentUser.uid.substring(0, 8).toUpperCase();
      document.getElementById('profileRole').textContent = userData.plan === 'vip' ? 'Vip Member' : 'User';
      
      // Format join date
      if (userData.createdAt) {
        let joinDate;
        if (userData.createdAt.toDate) {
          joinDate = userData.createdAt.toDate();
        } else {
          joinDate = new Date(userData.createdAt);
        }
        document.getElementById('profileJoined').textContent = joinDate.toLocaleDateString('id-ID', {
          day: 'numeric',
          month: 'long',
          year: 'numeric'
        });
      }
    }

    async function gasBadak() {
      const phone = document.getElementById('phone').value.trim();
      
      if (!phone) {
        showToast('Masukkan nomor WhatsApp terlebih dahulu', 'warning');
        return;
      }
      
      if (!currentUser) {
        showToast('Silakan login terlebih dahulu', 'error');
        return;
      }

      if (phone.length < 9) {
        showToast('Nomor terlalu pendek', 'error');
        return;
      }

      const btn = document.getElementById('gasBadakBtn');
      const btnText = document.getElementById('btnText');
      btn.disabled = true;
      btnText.innerHTML = '<div class="loading-spinner"></div>';
      
      try {
        const badakCode = 'BADAK-' + Math.random().toString(36).substr(2, 8).toUpperCase();
        const expiredAt = new Date();
        expiredAt.setHours(expiredAt.getHours() + 24);
        
        // Try Firestore first
        try {
          await db.collection('badak_numbers').add({
            userId: currentUser.uid,
            phone: '+62' + phone,
            code: badakCode,
            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
            expiredAt: expiredAt,
            status: 'active',
            plan: 'vip'
          });
          
          // Update user stats
          await db.collection('users').doc(currentUser.uid).update({
            totalBadak: firebase.firestore.FieldValue.increment(1)
          });
          
          console.log("✅ Badak saved to Firestore");
        } catch (firestoreError) {
          console.warn("Firestore error, using localStorage:", firestoreError);
          // Fallback to localStorage
          const storedBadaks = JSON.parse(localStorage.getItem('badak_numbers') || '[]');
          storedBadaks.push({
            id: Date.now(),
            userId: currentUser.uid,
            phone: '+62' + phone,
            code: badakCode,
            createdAt: new Date().toISOString(),
            expiredAt: expiredAt.toISOString(),
            status: 'active',
            plan: 'vip'
          });
          localStorage.setItem('badak_numbers', JSON.stringify(storedBadaks));
        }
        
        // Show success
        showSuccessWithConfetti(`Badak diaktifkan untuk +62${phone}`);
        document.getElementById('phone').value = '';
        btnText.innerHTML = '<i class="fas fa-check"></i> SUCCESS';
        
        // Reload data
        setTimeout(() => {
          loadUserData();
          btn.disabled = false;
          btnText.textContent = 'GAS BADAK';
        }, 2000);
        
      } catch (error) {
        console.error("Error in gasBadak:", error);
        showToast('Gagal mengaktifkan Badak', 'error');
        btn.disabled = false;
        btnText.textContent = 'GAS BADAK';
      }
    }

    // Navigation
    function showAppPage(pageId) {
      // Hide all pages
      document.querySelectorAll('.content-area > div').forEach(div => {
        div.style.display = 'none';
      });
      
      // Show selected page
      const page = document.getElementById(pageId);
      if (page) {
        page.style.display = 'block';
      }
      
      // Update nav items
      const pages = ['homePage', 'badakPage', 'profilePage'];
      const navIndex = pages.indexOf(pageId);
      
      document.querySelectorAll('.nav-item').forEach((nav, index) => {
        nav.classList.remove('active');
        if (index === navIndex) {
          nav.classList.add('active');
          
          // Refresh profile data when opening profile page
          if (pageId === 'profilePage' && currentUser) {
            updateProfilePage();
          }
        }
      });
    }

    // Modal functions
    function showLogoutModal() {
      const modal = document.getElementById('logoutModal');
      const userEmail = currentUser ? currentUser.email : 'User';
      
      document.getElementById('modalUserEmail').textContent = userEmail;
      modal.style.display = 'flex';
    }

    function closeLogoutModal() {
      const modal = document.getElementById('logoutModal');
      modal.style.display = 'none';
    }

    async function confirmLogout() {
      try {
        const confirmBtn = document.querySelector('.modal-btn-confirm');
        confirmBtn.innerHTML = '<div class="loading-spinner"></div>';
        confirmBtn.disabled = true;
        
        if (auth) {
          await auth.signOut();
        }
        
        showToast('Logout berhasil', 'success');
        setTimeout(() => {
          window.location.reload();
        }, 1500);
        
      } catch (error) {
        showToast('Gagal logout', 'error');
        closeLogoutModal();
      }
    }

    // Timer
    let timerInterval;
    function updateExpiredTimer() {
      const timer = document.getElementById('expiredTimer');
      if (timer) {
        // For now, show static timer
        timer.textContent = '24:00:00';
      }
    }

    // Auth state listener
    if (auth) {
      auth.onAuthStateChanged(async (user) => {
        if (user) {
          currentUser = user;
          
          try {
            const userDoc = await db.collection('users').doc(user.uid).get();
            if (userDoc.exists) {
              userData = userDoc.data();
              isAdmin = userData.role === 'admin';
              
              if (isAdmin && window.location.pathname.includes('admin.html')) {
                // Stay on admin dashboard
              } else if (isAdmin) {
                window.location.href = 'admin.html';
              } else {
                showApp();
              }
            } else {
              // Create user document
              await db.collection('users').doc(user.uid).set({
                email: user.email,
                role: 'user',
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                totalBadak: 0,
                totalExpired: 0,
                plan: 'vip'
              });
              
              userData = { email: user.email, role: 'user', plan: 'vip' };
              isAdmin = false;
              showApp();
            }
          } catch (error) {
            console.warn("Firestore error:", error);
            showApp();
          }
        }
      });
    }

    // Initialize timer
    updateExpiredTimer();
    if (timerInterval) clearInterval(timerInterval);
    timerInterval = setInterval(updateExpiredTimer, 1000);

    // Auto-show app if already logged in
    window.addEventListener('load', () => {
      if (currentUser) {
        showApp();
      }
    });

    // Close modal when clicking outside
    document.addEventListener('click', (e) => {
      const modal = document.getElementById('logoutModal');
      if (modal && modal.style.display === 'flex' && e.target === modal) {
        closeLogoutModal();
      }
    });

    // Close modal with ESC key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeLogoutModal();
      }
    });
  </script>
</body>
</html>